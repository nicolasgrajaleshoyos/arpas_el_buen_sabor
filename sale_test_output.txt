
   FAIL  Tests\Feature\SaleTest
  ✓ can crea… 1.66s  
  ✓ cannot s… 0.06s  
  ✓ can retu… 0.06s  
  ⨯ can retu… 0.10s  
  ⨯ cannot r… 0.05s  
  ─────────────────  
   FAILED  Tests…   
  Expected response status code [200] but received 201.
Failed asserting that 201 is identical to 200.

  at tests\Feature\SaleTest.php:140
    136▕             'status' => 'returned',
    137▕             'return_quantity' => $returnQty
    138▕         ]);
    139▕ 
  ➜ 140▕         $response->assertStatus(200); // Controller returns 200 for PUT
    141▕         // Controller returns the new model, default status 200 for PUT usually, but let's see. 
    142▕         // Actually, Controller returns `$returnedSale` or `$sale`. 
    143▕         // Laravel default for successful request is 200.
    144▕

  ─────────────────  
   FAILED  Tests\Feature\SaleTest > cannot return more than sold quantity  QueryException   
  SQLSTATE[23000]: Integrity constraint violation: 19 NOT NULL constraint failed: products.category (Connection: sqlite, SQL: insert into "products" ("name", "price", "stock", "updated_at", "created_at") values (Test, 100, 10, 2025-12-12 23:45:21, 2025-12-12 23:45:21))

  at vendor\laravel\framework\src\Illuminate\Database\Connection.php:571
    567▕             $this->bindValues($statement, $this->prepareBindings($bindings));
    568▕ 
    569▕             $this->recordsHaveBeenModified();
    570▕ 
  ➜ 571▕             return $statement->execute();
    572▕         });
    573▕     }
    574▕ 
    575▕     /**

  1   vendor\laravel\framework\src\Illuminate\Database\Connection.php:571
  2   vendor\laravel\framework\src\Illuminate\Database\Connection.php:812


  Tests:    2 failed, 3 passed (9 assertions)
  Duration: 2.47s

